{% extends 'layouts/base.html' %}

{% block title %}{{ note.title }}{% endblock %}

{% block main %}
    <div class="row mt-5">

        <!-- Title -->
        <h2 class="fs-2 text-center">{{ note.title }}</h2>

        <!-- Source and Author -->
        <div class="d-flex bd-highlight mb-3">
          <div class="p-2 bd-highlight">
              <a href="{{ note.source }}" target="_blank">Source</a>
          </div>
          <div class="p-2 bd-highlight text-secondary">
              Note author: {{ note.author.username }}
          </div>
          <!-- Control buttons (update/delete) -->
          <div class="ms-auto p-2 bd-highlight">
              {% if user == note.author %}
                <div class="d-flex justify-content-end">
                    <form action="{% url 'update' slug=note.slug %}" method="get">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline-info btn-sm">
                            Edit Note
                        </button>
                    </form>
                    <form action="{% url 'delete' slug=note.slug %}" method="post">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline-danger btn-sm ms-2" onclick="return confirm('Are you sure?');">
                            Delete Note
                        </button>
                    </form>
                </div>
            {% endif %}
          </div>
        </div>
    </div>
    <hr class="mt-2">
    <!-- Body -->
    <div class="row m-auto" style="max-width: 95%;">
        <p>{{ note.body_html | safe }}</p>
    </div>

{% endblock %}
